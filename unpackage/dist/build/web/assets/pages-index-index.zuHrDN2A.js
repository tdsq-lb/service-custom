import{m as e,h as s,n as a,c as t,w as r,i as l,o as n,a as o,b as d,r as c,F as i,d as h,t as f,e as m,S as u,f as _,g}from"./index-CTiNpAnj.js";import{_ as p}from"./_plugin-vue_export-helper.BCo6x5W8.js";const T=p({data:()=>({enabled:!0}),computed:{...e(["userInfo","triggered","chatUserList"])},onShow:function(){this.enabled=!0},methods:{onRefresh(){this.enabled&&(console.log("下拉刷新...onRefreshonRefresh"),this.$store.commit("SET_TRIGGERD",!0),s())},getHttpImagedUrl:e=>`${window.IMAGE_BASEURL}${e}`,hnadleJump(e){let s,t;1==e.chatType?(s=e.sendUser,t=e.sendName||e.sendUser):(s=e.receiveUser,t=e.receiveName),this.enabled=!1,this.$store.commit("SET_CHAT_HISTORY_LIST",{type:"clear"}),this.$store.commit("SET_CHAT_USER_LIST",{type:"flag",message:e.sendTime}),this.$store.commit("SET_CURRENT_SEND_USERID",s),a({url:`/pages/chat/chat?custUserId=${s}&sendName=${t}`})}}},[["render",function(e,s,a,p,T,U){const y=_,I=g,R=l,S=u;return n(),t(R,{class:"container"},{default:r((()=>[o(S,{"scroll-y":"",ref:"scrollView","refresher-enabled":T.enabled,"refresher-triggered":e.triggered,"refresher-background":"#f3f3f3",onRefresherrefresh:U.onRefresh,style:{height:"100vh"}},{default:r((()=>[o(R,{class:"list"},{default:r((()=>[(n(!0),d(i,null,c(e.chatUserList,(e=>(n(),t(R,{class:"list_item",key:e.msgId,onClick:s=>U.hnadleJump(e)},{default:r((()=>[o(y,{src:U.getHttpImagedUrl(1==e.chatType?e.sendAvatar:e.receiveAvatar),mode:"aspectFill",class:"avatar"},null,8,["src"]),o(R,{class:"info"},{default:r((()=>[o(R,{class:"top"},{default:r((()=>[o(I,{class:"top_name"},{default:r((()=>[h(f(1==e.chatType?e.sendName||e.sendUser:e.receiveName),1)])),_:2},1024),o(I,{class:"top_time"},{default:r((()=>[h(f(e.time),1)])),_:2},1024)])),_:2},1024),o(R,{class:"top grayTxtColor"},{default:r((()=>[o(I,null,{default:r((()=>[h(f(e.message),1)])),_:2},1024),e.isNew?(n(),t(I,{key:0,class:"badge",style:{}},{default:r((()=>[h("●")])),_:1})):m("",!0)])),_:2},1024)])),_:2},1024)])),_:2},1032,["onClick"])))),128)),e.chatUserList&&0==e.chatUserList.length?(n(),t(R,{key:0,class:"empty grayTxtColor"},{default:r((()=>[h(f(e.userInfo&&"zh"==e.userInfo.language?"暂无新消息":"No new news at the moment"),1)])),_:1})):m("",!0)])),_:1})])),_:1},8,["refresher-enabled","refresher-triggered","onRefresherrefresh"])])),_:1})}],["__scopeId","data-v-b1dc031b"]]);export{T as default};
